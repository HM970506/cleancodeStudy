# 16장 SerialDate 리팩터링

## ☘ 클로버
>아틀라시안의 코드 커버리지 분석 도구

코드 커버리지는 소스 코드를 기반으로 수행하는 화이트 박스 테스트를 통해 측정한다!
### 🔎 구문(라인) 커버리지
코드 한 줄이 한 번 이상 실행되면 충족
### 🔎 조건 커버리지
모든 조건식의 각 내부 조건이 true/false를 만족하면 충족
### 🔎 결정(브랜치) 커버리지
모든 조건식이 한 번이상 true/false를 만족하면 충족

<br/>

>### 🙄 테스트 커버리지의 필요성
> 클래스를 이해하고 리팩터링 하기 위해 필요하다! 


<br/>
<br/>
<br/>

## 🚨 경계 조건 오류
> 에러냐 아니냐의 경계가 되는 조건
>> ex) a/b의 경계조건은 b>0

### 🎇 경계조건에서 고려해야 할 7가지 사항

#### ⚙ Conformeance(준수)
데이터가 특정 양식을 따르는지 검증 <br/>
ex) 이메일이 ooo@oooo.ooo의 양식을 따르는가?
#### 🎠 Ordering(순서)
내림차순, 혹은 오름차순이 올바른 순서가 맞는지 확인 <br/>
ex) 1등을 0번 인덱스에 놓으려면, 성적이 내림차순으로 정렬되는 것이 맞는가?
#### 🚧 Range(범위)
프로그램이 허용할 수 있는 데이터 범위를 넘는지 검증 <br/>
ex) 나이 항목에 음수가 들어오는가?
#### 🔗 Reference(참조)
의존성에 관련된 모든 것들을 확인 <br/>
ex) 참고하는 클래스에 사전조건이 존재하는가?
#### 📍 Existence(존재)
주어진 값이 존재하는가? <br/>
ex) 해당 값이 null인가?
#### 🎰 Cardinality(개수)
목록의 개수나 상황에 따라 출력이 알맞게 되는지 확인 <br/>
ex) 목록에 아무것도 없다면 하나를 임의로 추가하는가?
#### ⏰ Time(시간)
* 상대적 시간 (순서) - ex) A는 반드시 B 앞에서 실행되어야 한다 <br/>
* 절대적 시간 (측정) - ex) UTC인가? DST인가? <br/>
* 동시성 문제        - ex) 동시에 같은 객체를 여러 스레드에서 접근한다면? <br/>

(출처: https://berrrrr.github.io/programming/2020/10/05/junit-correct/ )

<br/>
<br/>
<br/>

## 기반 클래스와 파생 클래스
> 기반 클래스는 파생 클래스를 몰라야 바람직하다. <br/>

~~그냥 부모 클래스와 자식 클래스를 이르는 다른 말..~~

<br/>
<br/>
<br/>

## 여러 가지 패턴
### 🏭 abstract factory pattern
> 추상 객체를 여러 버전으로 사용할 수 있게 하는 패턴

기반 클래스가 파생 클래스를 모르게 하기 위해 사용
![image](https://user-images.githubusercontent.com/62527898/184498004-60edddc8-91c1-4789-944f-45b530d6bb5c.png)

<br/>
<br/>

### 👑 singleton pattern
> 단 하나의 객체만을 생성하는 패턴

복수의 시스템이 하나의 자원에 접근할 때 유용
![image](https://user-images.githubusercontent.com/62527898/184497941-7c828eb6-3b8d-4620-b223-83420d6cf4dd.png)

(출처: https://joomn11.tistory.com/49?category=934462 )

<br/>
<br/>

### 🎀 decorator pattern
> 객체의 결합을 통해 기능을 동적으로 확장할 수 있게 해주는 패턴

기본 기능에 추가해야하는 기능의 종류가 많은 경우 <br/>
  👉 각 추가 기능을 Decorator 클래스로 정의 한 후 필요한 Decorator 객체를 조합
![image](https://user-images.githubusercontent.com/62527898/184497910-73f9b863-39fa-438b-ada5-cb90288f69ab.png)
  
(출처: https://gmlwjd9405.github.io/2018/07/09/decorator-pattern.html)

<br/>
<br/>
<br/>


> 구현에 논리적으로 의존하는 관계는 물리적으로도 의존해야 마땅하다!

<br/>
<br/>
<br/>

## 리팩터링을 위해 저자가 진행한 사항들
* 주석을 최신의 것으로 고치기
* enum을 독자적 소스 파일로 옮기기
* 정적 변수와 정적 메서드를 특정 클래스에 모으기
* 일부 추상 메서드를 외부로 끌어올리기
* 모든 enum에 접근자를 생성하기
