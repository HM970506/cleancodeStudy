16장 SerialDate 리팩터링
=================
_JCommon 라이브러리를 뒤져보면 org.ifree.date라는 패키지가 있으며,
여기에 serialDate라는 클래스가 있다.  
이 장에서는 바로 이 SerialDate라는 클래스를 탐험한다._  
<br>

__SerialDate는 날짜를 표현하는 자바 클래스다.__
자바는 이미 java.util.Date, java.util.Calendar 등과 같은 클래스를 제공하지만
기존의 클래스는 시간 기반 날짜 클래스이기 때문에 불편함이 존재한다.   
<br>

### 첫째, 돌려보자
클로버(코드 커버리지 분석 도구)에 따르면 코드 커버리지는 50%에 불과하다.
단위 테스트가 실행되지 않은 코드가 클래스 여기저기에 흩어져 있다.
클래스를 철저히 이해하고 리팩터링하려면 훨씬 높은 테스트 커버리지가 필요하다.

>_해결방안_
>
>__1. 주석 코드를 줄이자.__  
>많은 주석 코드를 뺀 새단위 테스트는 코드 커버리지가 대략 92%에 이른다.    
><br>
>__2. 대소문자 구분없이 모두 통과해야 한다.__    
>equalsIgnoreCase와 같은 메서드를 사용하여 대소문자 구분 없이 모두 통과해야 한다.   
><br>
>__3. 경계 조건 오류를 확인하자.__

<br>

### 둘째, 고쳐보자
SerialDate 코드를 처음부터 짚어가며 하나씩 고쳐보자.  
또한 코드를 고칠 때마다 JCommon 단위 테스트와 직접 구현한 단위 테스트를 실행하여 확인 단계를 거치자.

> _변경 내역_
>
> 1. 처음에 나오는 주석은 너무 오래되었다. 그래서 간단하게 고치고 개선했다.
> 2. enum을 모두 독자적인 소스 파일로 옮겼다.
> 3. 정적 변수와 정적 메서드를 새 클래스로 옮겼다.
> 4. 일부 추상 메서드를 클래스로 끌어올렸다.
> 5. enum의 상수 이름을 개선하고 접근자를 생성했다. index 필드를 private으로 정의했다.
> 6. 중복되는 메서드를 합쳐서 새로운 메서드를 생성하여 중복을 제거했다.
> 7. 여기저기 사용되던 숫자 1을 제거하고 이름을 명확하게 하였다.

흥미롭게도 코드 커버리지는 84.9%으로 감소했다!
테스트하는 코드가 줄어서가 아니라 클래스 크기가 작아지는 바람에 테스트하지 않는 코드의 비중이 커졌기 때문이다.  
<br>

### 결론
보이스카우트 규칙을 따른 리팩터링은 시간은 걸리지만 가치 있는 작업이다.  
테스트 커버리지가 증가했으며, 버그 몇 개를 고쳤으며, 코드 크기가 줄었고, 코드가 명확해졌다.  
